(defcfg
  linux-continue-if-no-devs-found yes
  process-unmapped-keys yes
  concurrent-tap-hold yes
  chords-v2-min-idle 50
  danger-enable-cmd yes
)
;; keys to be used in the layers
(defsrc
  â‹  1 2 3 4 5 6 7 8 9  0  -  = âŒ«
  â­¾  q w e r t y u i o  p ã€Œ ã€ \
  â‡ª  a s d f g h j k l ï¸” '  â
  â€¹â‡§ z x c v b n m â¸´ .  â„ â‡§â€º
  â€¹âŒƒ â€¹â–  â€¹â‡   â£   â‡â€º â˜° âŒƒâ€º
)

(defvar
  tap-timeout 200
  hold-timeout 150
  hold-timeout-pinky 200
  hold-timeout-long 1000
  chord-timeout 30

  tt  $tap-timeout
  ht  $hold-timeout
  htp $hold-timeout-pinky
  htl $hold-timeout-long
  ct  $chord-timeout
)

;; home (top) row mods
(defalias
  q   (tapâ¬“â†‘    $tt $htp  (multi q u) q)
  w   (tap-hold $tt $ht w â€¹â‡)
  e   (tap-hold $tt $ht e â€¹âŒƒ)
  r   (tap-hold $tt $ht r â€¹â–)
  u   (tap-hold $tt $ht u â–â€º)
  i   (tap-hold $tt $ht i âŒƒâ€º)
  o   (tap-hold $tt $ht o â‡â€º)
  aNm (tapâ¬“â†‘    $tt $htp  a (layer-toggle num))
  sNv (tapâ¬“â†‘    $tt $ht   s (layer-toggle nav-misc))
 ï¸”Sm (tapâ¬“â†‘    $tt $htp ï¸” (layer-toggle sym))
  qMs (tap-hold $tt $ht   q (layer-toggle mouse))

  âŸ³ (tap-hold $tt $ht rpt rpt-any)

  meh (multi â€¹âŒƒ â€¹â‡ â€¹â‡§)
  â£ (tap-hold $tt $ht â£ @meh)
)

;;base layer is the first layer defined
(deflayer base
;;â€¢   â€¢     â€¢     â€¢     â€¢     â€¢           â€¢     â€¢     â€¢     â€¢     â€¢  â€¢ â€¢ â€¢
  â€¢   _     _     _     _     _           _     _     _     _     _  _ _ â€¢
  â€¢  @qMs  @w    @e    @r     t           y    @u    @i    @o     p  â€¢ â€¢ â€¢
  â€¢  @aNm  @sNv   d     f     g           h     j     k     l   @ï¸”Sm  â€¢ â€¢
  â€¢         x     m     c     b    @âŸ³    â€¹â‡§     n     â¸´     .     /      â€¢
  â€¢         â€¢           â€¢          @â£           â€¢           â˜°           â€¢
)
(defalias
  â­¾ (tap-hold $tt $ht â­¾  â€¹â‡§â­¾ )
  ;; cw (wordâ‡ª-custom $htl
  cw (caps-word-custom $htl
    (a b c d e f g h i j k l m n o p q r s t u v w x y z)
    (âŒ« âŒ¦ â–² â—€ â–¼ â–¶)
  )
)

(defchordsv2
  ;; missing characters
  (x c)  z $ct first-release (sym)
  (d f)  v $ct first-release (sym)
  (j k) @êŒ $ct first-release ()
  (u i) @â€ $ct first-release ()
  (s d) ï¸” $ct first-release ()

  ;; commands
  (e r) @â­¾  $ct first-release (sym)
  (w e)  â‹  $ct first-release (sym)
  (i o)  âŒ«  $ct first-release ()
  (o p)  âŒ¦  $ct first-release ()
  (k l)  â  $ct first-release ()

  ;; left hand backspace/enter for mouse use
  (a s)  âŒ«  $ct first-release (sym)
  (z x)  â  $ct first-release (sym)

  ;; caps
  (f j) @cw $ct first-release (sym)
  (q p)  â‡ª  $ct first-release (sym)

  ;; vim
  (z x c) (macro S-(z z)) $ct first-release () ;; ZZ
  (q w e) (macro S-(z q)) $ct first-release () ;; ZQ
 )

(defalias
  !  S-1
  ï¼  S-2
  âŒ—  S-3
  $  S-4
  Ùª  S-5
  âˆ§  S-6
  ï¼† S-7
  âˆ—  S-8
 ã€”  S-9
  ã€• S-0
  Ëœ  S-Ë‹
  -  min
  _  S-min
  ï¼‹ S-eql
  |  S-\
  ï¼» [
  ï¼½ ]
  â´  S-[
  âµ  S-]
  :  S-;
  âŸ¨  S-,
  âŸ©  S-.
  ?  S-â„
  â€   (tap-hold $tt $ht S-' â€¹âŒƒ)
 ï¸”   (tap-hold $tt $ht ï¸”  â€¹âŒƒ)
  spc (tap-hold $tt $ht â£   â€¹â–)
  êŒ  '
)
(deflayer sym
  â€¢   â€¢     â€¢     â€¢     â€¢     â€¢           â€¢     â€¢     â€¢     â€¢     â€¢  â€¢ â€¢ â€¢
  â€¢  @âŸ¨     =    @âŸ©    @$    @âˆ§          @âˆ—    @Ùª     `     \     â€¢  â€¢ â€¢ â€¢
  â€¢  @ï¸”    [    @ã€”   @â´    @!          @Ëœ    @âµ    @ã€•    ]     _    â€¢ â€¢
  â€¢        @|    @ï¼†   @?    @:    @âŒ—    @_     -    @ï¼‹   @ï¼     â€¢      â€¢
  â€¢         â€¢           â€¢          @spc         â€¢           â˜°           â€¢
)

(defalias
  bse (tap-hold $tt $htl nop0 (layer-switch base))
  grp (tap-hold $tt $htl nop0 (layer-switch graphite))
  qwr (tap-hold $tt $htl nop0 (layer-switch qwerty))
  zy  (tap-hold $tt $ht â€¹âŒƒz â€¹âŒƒy)
  fa (cmd sh -c 'setxkbmap -layout "ir"')
)

(deflayer nav-misc
  â€¢   â€¢     â€¢     â€¢     â€¢     â€¢           â€¢     â€¢     â€¢     â€¢     â€¢  â€¢ â€¢ â€¢
  â€¢   â€¢     â€¢    â€¹âŒƒ    â€¹â–    @grp         â—€â—€    â†–     â–²     â†˜     â–¶â–¶ â€¢ â€¢ â€¢
  â€¢  â€¹â‡     _   â€¹âŒƒc   â€¹âŒƒv    @bse         â‡     â—€     â–¼     â–¶     â‡Ÿ    â€¢ â€¢
  â€¢        @fa  â€¹âŒƒx    @zy   @qwr   â€¢    â€¹â‡§     â–¶â¸    ğŸ”‰    ğŸ”Š    ğŸ”‡     â€¢
  â€¢         â€¢           â€¢           â           â€¢           â˜°            â€¢
)

(defalias
  1  (tap-hold $tt $htl 1    f1)
  2  (tap-hold $tt $htl 2    f2)
  3  (tap-hold $tt $htl 3    f3)
  4  (tap-hold $tt $htl 4    f4)
  5  (tap-hold $tt $htl 5    f5)
  6  (tap-hold $tt $htl 6    f6)
  7  (tap-hold $tt $htl 7    f7)
  8  (tap-hold $tt $htl 8    f8)
  9  (tap-hold $tt $htl 9    f9)
  in (tap-hold $tt $htl â€    f10)
  br (tap-hold $tt $htl brk  f11)
  pr (tap-hold $tt $htl prnt f12)
)
(deflayer num
  â€¢   â€¢     â€¢     â€¢     â€¢     â€¢           â€¢     â€¢     â€¢     â€¢     â€¢  â€¢ â€¢ â€¢
  â€¢   â€¢    â€¹â‡    â€¹âŒƒ    â€¹â–     â„          @in   @4    @5    @6     â€¢  â€¢ â€¢ â€¢
  â€¢   _     .     â¸´    @ï¼‹   @âˆ—          @br   @1    @2    @3     0    â€¢ â€¢
  â€¢         â€¢     â€¢     â€     =    @pr   â€¹â‡§    @7    @8    @9     â€¢      â€¢
  â€¢         â€¢           â€¢          @â£           â€¢           â˜°           â€¢
)

(defalias
  ;; mousewheel: interval, distance
  wu (ğŸ–±â˜¸â†‘ 50 120)
  wd (ğŸ–±â˜¸â†“ 50 120)
  wl (ğŸ–±â˜¸â† 50 120)
  wr (ğŸ–±â˜¸â†’ 50 120)

  ;; movemouse-speed: percent
  s0 (ğŸ–±speed 25)
  s1 (ğŸ–±speed 50)
  s2 (ğŸ–±speed 150)
  s3 (ğŸ–±speed 250)

  ;; movemouse: interval, distance
  mu (ğŸ–±â†‘ 8 4)
  md (ğŸ–±â†“ 8 4)
  ml (ğŸ–±â† 8 4)
  mr (ğŸ–±â†’ 8 4)
)
(deflayer mouse
  â€¢   â€¢     â€¢     â€¢     â€¢     â€¢           â€¢     â€¢     â€¢     â€¢     â€¢  â€¢ â€¢ â€¢
  â€¢   â€¢    @wu   @mu   @wd    â€¢           â€¢    @s2   @s1   @s3   @s0 â€¢ â€¢ â€¢
  â€¢   â€¢    @ml   @md   @mr    â€¢           â€¢     mlft  mrgt â€¹âŒƒ    â€¹â–    â€¢ â€¢
  â€¢        @wl    mmid @wr    â€¢     _     _     â€¢     â€¢     â€¢    â€¹â‡§      â€¢
  â€¢         â€¢           â€¢           â           â€¢           â˜°           â€¢
)

(defalias
  lg  (tap-hold $tt $ht l â€¹â‡)
  dg  (tap-hold $tt $ht d â€¹âŒƒ)
  wg  (tap-hold $tt $ht w â€¹â–)
  fg  (tap-hold $tt $ht f â–â€º)
  og  (tap-hold $tt $ht o âŒƒâ€º)
  ug  (tap-hold $tt $ht u â‡â€º)
  nNm (tap-hold-release $tt $htp n (layer-toggle num))
  rNv (tap-hold-release $tt $ht  r (layer-toggle nav-misc))
  iSm (tap-hold-release $tt $htp i (layer-toggle sym))
  bMs (tap-hold $tt $ht b (layer-toggle mouse))
  /   (tap-hold $tt $htl / (layer-switch base))
)
(deflayer graphite
  â€¢   â€¢     â€¢     â€¢     â€¢     â€¢           â€¢     â€¢     â€¢     â€¢     â€¢  â€¢ â€¢ â€¢
  â€¢  @bMs  @lg   @dg   @wg    v           k    @fg   @og   @ug    j  â€¢ â€¢ â€¢
  â€¢  @nNm  @rNv   t     s     g           y     h     a     e    @iSm  â€¢ â€¢
  â€¢         x     m     c    @âŸ³    @q     â‡§â€º    p     â¸´     .    @/      â€¢
  â€¢         â€¢           â€¢          @â£           â€¢           â˜°           â€¢
)

(defalias
  Ø§ (ğŸ”£ Ø§)
  Ø¨ (ğŸ”£ Ø¨)
  Ù¾ (ğŸ”£ Ù¾)
  Øª (ğŸ”£ Øª)
  Ø« (ğŸ”£ Ø«)
  Ø¬ (ğŸ”£ Ø¬)
  Ú† (ğŸ”£ Ú†)
  Ø­ (ğŸ”£ Ø­)
  Ø® (ğŸ”£ Ø®)
  Ø¯ (ğŸ”£ Ø¯)
  Ø° (ğŸ”£ Ø°)
  Ø± (ğŸ”£ Ø±)
  Ø² (ğŸ”£ Ø²)
  Ú˜ (ğŸ”£ Ú˜)
  Ø³ (ğŸ”£ Ø³)
  Ø´ (ğŸ”£ Ø´)
  Øµ (ğŸ”£ Øµ)
  Ø¶ (ğŸ”£ Ø¶)
  Ø· (ğŸ”£ Ø·)
  Ø¸ (ğŸ”£ Ø¸)
  Ø¹ (ğŸ”£ Ø¹)
  Øº (ğŸ”£ Øº)
  Ù (ğŸ”£ Ù)
  Ù‚ (ğŸ”£ Ù‚)
  Ú© (chord ge ï¸”)
  Ú¯ (ğŸ”£ Ú¯)
  Ù„ (ğŸ”£ Ù„)
  Ù… (chord ge  l)
  Ù† (ğŸ”£ Ù†)
  Ùˆ (ğŸ”£ Ùˆ)
  Ù‡ (ğŸ”£ Ù‡)
  ÛŒ (ğŸ”£ ÛŒ)
)
(defchords ge 15
  (l   ) (ğŸ”£ Ù…)
  (  ï¸”) (ğŸ”£ Ú©)
  (l ï¸”) (ğŸ”£ Ú¯)
)
(deflayer farsi
  _   _     _     _     _     _           _     _     _     _     _  _ _ _
  _  @Ø¶    @Øµ    @Ø«    @Ù‚    @Ù          @Øº    @Ø¹    @Ù‡    @Ø®    @Ø­  _ _ _
  _  @Ø´    @Ø³    @ÛŒ    @Ø¨    @Ù„          @Ø§    @Øª    @Ù†    @Ù…    @Ú©    _ _
  _        @Ø·    @Ø²    @Ø±    @Ø°    @Ø¸     â‡§â€º   @Ø¯    @Ù¾    @Ùˆ     .      _
  _         _           _           â£           _           â˜°           _
)

(deflayer qwerty
  _   _     _     _     _     _           _     _     _     _     _  _ _ _
  _   q     w     e     r     t           y     u     i     o     p  _ _ _
  _   a     s     d     f     g           h     j     k     l    ï¸”    _ _
  _   z     x     c     v     b           n     m     â¸´     .    @/      _
  _         _           _           â£           _           â˜°           _
)
